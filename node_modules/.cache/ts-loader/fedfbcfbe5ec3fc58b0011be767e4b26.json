{"remainingRequest":"/home/george/projects/gem-farm-chimps-v2/node_modules/babel-loader/lib/index.js!/home/george/projects/gem-farm-chimps-v2/node_modules/ts-loader/index.js??ref--14-2!/home/george/projects/gem-farm-chimps-v2/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/george/projects/gem-farm-chimps-v2/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/george/projects/gem-farm-chimps-v2/src/components/gem-farm/FarmerDisplay.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/george/projects/gem-farm-chimps-v2/src/components/gem-farm/FarmerDisplay.vue","mtime":1651784671825},{"path":"/home/george/projects/gem-farm-chimps-v2/babel.config.js","mtime":1651784671821},{"path":"/home/george/projects/gem-farm-chimps-v2/node_modules/cache-loader/dist/cjs.js","mtime":1648666880328},{"path":"/home/george/projects/gem-farm-chimps-v2/node_modules/babel-loader/lib/index.js","mtime":1648666880284},{"path":"/home/george/projects/gem-farm-chimps-v2/node_modules/ts-loader/index.js","mtime":1648666885109},{"path":"/home/george/projects/gem-farm-chimps-v2/node_modules/cache-loader/dist/cjs.js","mtime":1648666880328},{"path":"/home/george/projects/gem-farm-chimps-v2/node_modules/vue-loader-v16/dist/index.js","mtime":1648666889180}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2dlb3JnZS9wcm9qZWN0cy9nZW0tZmFybS1jaGltcHMtdjIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBvbk1vdW50ZWQsIHdhdGNoIH0gZnJvbSAndnVlJzsKaW1wb3J0IEZhcm1lclJld2FyZERpc3BsYXkgZnJvbSAnQC9jb21wb25lbnRzL2dlbS1mYXJtL0Zhcm1lclJld2FyZERpc3BsYXkudnVlJzsKaW1wb3J0IHVzZVdhbGxldCBmcm9tICdAL2NvbXBvc2FibGVzL3dhbGxldCc7CmltcG9ydCB1c2VDbHVzdGVyIGZyb20gJ0AvY29tcG9zYWJsZXMvY2x1c3Rlcic7CmltcG9ydCB7IGluaXRHZW1GYXJtIH0gZnJvbSAnQC9jb21tb24vZ2VtLWZhcm0nOwppbXBvcnQgeyBQdWJsaWNLZXkgfSBmcm9tICdAc29sYW5hL3dlYjMuanMnOwppbXBvcnQgeyBwYXJzZURhdGUgfSBmcm9tICdAL2NvbW1vbi91dGlsJzsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBGYXJtZXJSZXdhcmREaXNwbGF5OiBGYXJtZXJSZXdhcmREaXNwbGF5CiAgfSwKICBwcm9wczogewogICAgZmFybTogU3RyaW5nLAogICAgZmFybUFjYzogT2JqZWN0LAogICAgZmFybWVyOiBTdHJpbmcsCiAgICBmYXJtZXJBY2M6IE9iamVjdAogIH0sCiAgZW1pdHM6IFsncmVmcmVzaC1mYXJtZXInXSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIGN0eCkgewogICAgdmFyIF91c2VXYWxsZXQgPSB1c2VXYWxsZXQoKSwKICAgICAgICB3YWxsZXQgPSBfdXNlV2FsbGV0LndhbGxldCwKICAgICAgICBnZXRXYWxsZXQgPSBfdXNlV2FsbGV0LmdldFdhbGxldDsKCiAgICB2YXIgX3VzZUNsdXN0ZXIgPSB1c2VDbHVzdGVyKCksCiAgICAgICAgY2x1c3RlciA9IF91c2VDbHVzdGVyLmNsdXN0ZXIsCiAgICAgICAgZ2V0Q29ubmVjdGlvbiA9IF91c2VDbHVzdGVyLmdldENvbm5lY3Rpb247CgogICAgdmFyIGdmOwogICAgd2F0Y2goW3dhbGxldCwgY2x1c3Rlcl0sIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gaW5pdEdlbUZhcm0oZ2V0Q29ubmVjdGlvbigpLCBnZXRXYWxsZXQoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgZ2YgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7IC8vbmVlZCBhbiBvbm1vdW50ZWQgaG9vayBiZWNhdXNlIHRoaXMgY29tcG9uZW50IGlzbid0IHlldCBtb3VudGVkIHdoZW4gd2FsbGV0L2NsdXN0ZXIgYXJlIHNldAoKICAgIG9uTW91bnRlZCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoZ2V0V2FsbGV0KCkgJiYgZ2V0Q29ubmVjdGlvbigpKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGluaXRHZW1GYXJtKGdldENvbm5lY3Rpb24oKSwgZ2V0V2FsbGV0KCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGdmID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkpOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gZGlzcGxheSBmYXJtZXIKICAgIC8vIHRvZG8gaWRlYWxseSBzaG91bGQgYmUgdXNpbmcgb25lIGZyb20gY2xpZW50LCBidXQgbi9hIGR1cmluZyByZW5kZXIKCiAgICB2YXIgcGFyc2VGYXJtZXJTdGF0ZSA9IGZ1bmN0aW9uIHBhcnNlRmFybWVyU3RhdGUoZmFybWVyKSB7CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhmYXJtZXIuc3RhdGUpWzBdOwogICAgfTsKCiAgICB2YXIgcmVmcmVzaEZhcm1lciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBnZi5yZWZyZXNoRmFybWVyV2FsbGV0KG5ldyBQdWJsaWNLZXkocHJvcHMuZmFybSksIG5ldyBQdWJsaWNLZXkocHJvcHMuZmFybWVyKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGN0eC5lbWl0KCdyZWZyZXNoLWZhcm1lcicpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gcmVmcmVzaEZhcm1lcigpIHsKICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICByZWZyZXNoRmFybWVyOiByZWZyZXNoRmFybWVyLAogICAgICBwYXJzZUZhcm1lclN0YXRlOiBwYXJzZUZhcm1lclN0YXRlLAogICAgICBwYXJzZURhdGU6IHBhcnNlRGF0ZQogICAgfTsKICB9Cn0pOw=="},{"version":3,"sources":["/home/george/projects/gem-farm-chimps-v2/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/george/projects/gem-farm-chimps-v2/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/george/projects/gem-farm-chimps-v2/src/components/gem-farm/FarmerDisplay.vue?vue&type=script&lang=ts"],"names":[],"mappings":";;;AACA,SAAS,eAAT,EAA0B,SAA1B,EAAqC,KAArC,QAAkD,KAAlD;AACA,OAAO,mBAAP,MAAgC,+CAAhC;AACA,OAAO,SAAP,MAAsB,sBAAtB;AACA,OAAO,UAAP,MAAuB,uBAAvB;AACA,SAAS,WAAT,QAA4B,mBAA5B;AACA,SAAS,SAAT,QAA0B,iBAA1B;AACA,SAAS,SAAT,QAA0B,eAA1B;AAEA,eAAe,eAAe,CAAC;AAC7B,EAAA,UAAU,EAAE;AAAE,IAAA,mBAAmB,EAAnB;AAAF,GADiB;AAE7B,EAAA,KAAK,EAAE;AACL,IAAA,IAAI,EAAE,MADD;AAEL,IAAA,OAAO,EAAE,MAFJ;AAGL,IAAA,MAAM,EAAE,MAHH;AAIL,IAAA,SAAS,EAAE;AAJN,GAFsB;AAQ7B,EAAA,KAAK,EAAE,CAAC,gBAAD,CARsB;AAS7B,EAAA,KAT6B,iBASvB,KATuB,EAShB,GATgB,EASb;AACd,qBAA8B,SAAS,EAAvC;AAAA,QAAQ,MAAR,cAAQ,MAAR;AAAA,QAAgB,SAAhB,cAAgB,SAAhB;;AACA,sBAAmC,UAAU,EAA7C;AAAA,QAAQ,OAAR,eAAQ,OAAR;AAAA,QAAiB,aAAjB,eAAiB,aAAjB;;AAEA,QAAI,EAAJ;AACA,IAAA,KAAK,CAAC,CAAC,MAAD,EAAS,OAAT,CAAD,uEAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZ,WAAW,CAAC,aAAa,EAAd,EAAkB,SAAS,EAA3B,CADC;;AAAA;AACvB,cAAA,EADuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAApB,GAAL,CALc,CASd;;AACA,IAAA,SAAS,uEAAC;AAAA;AAAA;AAAA;AAAA;AAAA,oBACJ,SAAS,MAAM,aAAa,EADxB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEK,WAAW,CAAC,aAAa,EAAd,EAAkB,SAAS,EAA3B,CAFhB;;AAAA;AAEN,cAAA,EAFM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT,CAVc,CAgBd;AACA;;AACA,QAAM,gBAAgB,GAAG,SAAnB,gBAAmB,CAAC,MAAD,EAAwB;AAC/C,aAAO,MAAM,CAAC,IAAP,CAAY,MAAM,CAAC,KAAnB,EAA0B,CAA1B,CAAP;AACD,KAFD;;AAIA,QAAM,aAAa;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACd,EAAE,CAAC,mBAAH,CACJ,IAAI,SAAJ,CAAc,KAAK,CAAC,IAApB,CADI,EAEJ,IAAI,SAAJ,CAAc,KAAK,CAAC,MAApB,CAFI,CADc;;AAAA;AAKpB,gBAAA,GAAG,CAAC,IAAJ,CAAS,gBAAT;;AALoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAb,aAAa;AAAA;AAAA;AAAA,OAAnB;;AAQA,WAAO;AACL,MAAA,aAAa,EAAb,aADK;AAEL,MAAA,gBAAgB,EAAhB,gBAFK;AAGL,MAAA,SAAS,EAAT;AAHK,KAAP;AAKD;AA5C4B,CAAD,CAA9B","sourcesContent":["\nimport { defineComponent, onMounted, watch } from 'vue';\nimport FarmerRewardDisplay from '@/components/gem-farm/FarmerRewardDisplay.vue';\nimport useWallet from '@/composables/wallet';\nimport useCluster from '@/composables/cluster';\nimport { initGemFarm } from '@/common/gem-farm';\nimport { PublicKey } from '@solana/web3.js';\nimport { parseDate } from '@/common/util';\n\nexport default defineComponent({\n  components: { FarmerRewardDisplay },\n  props: {\n    farm: String,\n    farmAcc: Object,\n    farmer: String,\n    farmerAcc: Object,\n  },\n  emits: ['refresh-farmer'],\n  setup(props, ctx) {\n    const { wallet, getWallet } = useWallet();\n    const { cluster, getConnection } = useCluster();\n\n    let gf: any;\n    watch([wallet, cluster], async () => {\n      gf = await initGemFarm(getConnection(), getWallet()!);\n    });\n\n    //need an onmounted hook because this component isn't yet mounted when wallet/cluster are set\n    onMounted(async () => {\n      if (getWallet() && getConnection()) {\n        gf = await initGemFarm(getConnection(), getWallet()!);\n      }\n    });\n\n    // --------------------------------------- display farmer\n    // todo ideally should be using one from client, but n/a during render\n    const parseFarmerState = (farmer: any): string => {\n      return Object.keys(farmer.state)[0];\n    };\n\n    const refreshFarmer = async () => {\n      await gf.refreshFarmerWallet(\n        new PublicKey(props.farm!),\n        new PublicKey(props.farmer!)\n      );\n      ctx.emit('refresh-farmer');\n    };\n\n    return {\n      refreshFarmer,\n      parseFarmerState,\n      parseDate,\n    };\n  },\n});\n"],"sourceRoot":""}]}